<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
			<title>Autonomous</title>
			<script src="Resources/d3/d3.js"></script>
			<script src="Resources/jquery-2.1.3.min.js"></script>
            <link href="Resources/dist/css/bootstrap.min.css" rel="stylesheet">
        	<script src="Resources/dist/js/bootstrap.min.js"></script>
			</head>


	<link type="text/css" rel="stylesheet" href="AkiUI_MainPageCSS.css"></link>


	<body>

<ul class="nav nav-tabs" role="tablist">

  <li><a href="UI_MainPage.html">Drive</a></li>
  <li class="active"><a href="Aton.html">Aton</a></li>
	<li><a href="Robot.html">Robot</a></li>
	<li><a href="Camera.html">Camera</a></li>
	<li><a href="thing.html">Things</a></li>

</ul>

<div>
		<select id="AutoPathChoice" >
		</select>

			<select>
				<option>Starting left</option>
				<option>Strating middle</option>
				<option>Strating right</option>
			</select>
	</div>
			<br>
	<div class="settingsBox">

		</div>


		<script type="text/javascript" src="SocketController.js"></script>
		<script type="text/javascript" src="writeSettings.js"></script>
		<script>
		var arr=new Array();
		$(document).ready(
		function(){
			window.setTimeout(function(){

							var arrayId=RegExp.escape('/SmartDashboard/Autonomous Mode/');
							var selectedAutonomousMode;


							if(!(arrayId+'selected' in keyStore)||
							keyStore[arrayId+'selected']==undefined){
								selectedAutonomousMode=keyStore[arrayId+'default'];
							}
							else{
								selectedAutonomousMode=keyStore[arrayId+'selected' ];
							}
							console.log(selectedAutonomousMode);
							//var arr={};
							arr.push(selectedAutonomousMode);

				fillAutonomousBox("#AutoPathChoice",RegExp.escape('/SmartDashboard/Autonomous Mode/'));
				writeArray(arr,".settingsBox");
			},300);
				}
		);






							var	$autoSelector=$('#AutoPathChoice');
							$autoSelector.change(function(event){
								event.preventDefault();
								//alert( $autoSelector.children(':selected').text());
								var val=$autoSelector.find('option:selected').text();
								//alert(val);
								var sendVal={
									key://RegExp.escape(
										'/SmartDashboard/Autonomous Mode/selected'//)
										,
									value:val,
									action:"writeToSubtable",
									tableName:"Autonomous Mode"
								};
								Socket.setValue(sendVal);
							});



					function fillAutonomousBox(key,arrayId,defaultVal){

						console.log(keyStore);
						d3.select(key)
						.selectAll("select")
						.data(keyStore[arrayId+'options'])
						.enter()
						.append("option")
						.text(function(d,i){
							return keyStore[arrayId+'options'][i];
						});
						if(!(arrayId+'selected' in keyStore)||
						keyStore[arrayId+'selected']==undefined){
							$(key).val(keyStore[arrayId+'default']);
						}
						else{
							$(key).val(keyStore[arrayId+'selected' ]);
						}
					}


		</script>
	</body>
</html>
